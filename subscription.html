<HTML>
    <head>
        <title>LYNQ - Science for content creators</title>
        <link rel="icon" type="image/png" href="./fav32x32.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="subscription.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,wght@0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,600;1,700;1,800;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta charset="utf-8" />
        <script>
            !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
            n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
            document,'script','//connect.facebook.net/en_US/fbevents.js');
            
            
            fbq('init', '692712227898613');
            fbq('track', "PageView");
        </script>
        <noscript>
            <img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=692712227898613&ev=PageView&noscript=1"/>
        </noscript>
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','GTM-KBTXVHV');</script>
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KBTXVHV"
            height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->
    </head>

    <body>
        <header>
            <div class="head-div wrapper desktop">
                <img src="./assets/lynq-logo.svg" alt="logo" class="logo-img"/>
            </div>
            <div class="dropdown mobile">
                <div class="wrapper logo-div">
                    <img src="./assets/lynq-logo.svg" alt="logo" class="logo-img"/>
                </div>
            </div>
        </header>
        <div class="content-div">
            <div class="content wrapper">
                <section class="happy-section">
                    <h1>We're so happy <br/> you want to use Lynq!</h1>
                    <p>At this stage, Lynq is in beta version and only available by invitation.</p>
                </section>
                <section class="email-section">
                    <h2>Enter your email below to receive an invite.</h2>
                    <input class="email-input" placeholder="ENTER EMAIL"/>
                    <span class="error-message display-none">Please enter a valid email address</span>
                    <div class="submit-btn">SUBMIT</div>
                </section>
                <section class="submit-succeed display-none">
                    <h2>Thank you <br/> Your request was sent</h2>
                </section>
            </div>
        </div>
        <footer>
            <div class="foot-div wrapper">
                <div class="other-link-div">
                    <a href="./terms-and-conditions.html">Terms and Conditions</a>
                    <a href="./terms-and-conditions.html">Privacy Policy</a>
                    <a href="mailto:contact@lynq.app">Contact Us</a>
                </div>
                <div class="reserved-div">
                    <p>Â© 2022 LYNQ, All Rights Reserved</p>
                    <div class="social-link">
                        <a href="https://www.instagram.com/lynqplatform" target="_blank"><img src="./assets/instagram-logo.svg" alt="instagram" /></a>
                        <a href="https://www.linkedin.com/company/lynq1/" target="_blank"><img src="./assets/linkedin-logo.svg" alt="linkedin" /></a>
                    </div>
                </div>
            </div>
        </footer>
    </body>

    <script>
        function myFunction() {
            document.getElementById("myDropdown").classList.toggle("show");
            document.body.classList.toggle("overflow-hidden");
        }
        const validateEmail = (email) => {
            return email.match(
                /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
            );
        };
        window.onclick = function(event) {
            if (event.target.matches('.submit-btn')) {
                var email_input = document.getElementsByClassName("email-input");
                var error_span = document.getElementsByClassName("error-message");
                var email_section = document.getElementsByClassName("email-section");
                var submit_succeed = document.getElementsByClassName("submit-succeed");
                if(validateEmail(email_input[0].value)) {
                    error_span[0].classList.add("display-none");
                    
                    let postObj = { 
                        email: email_input[0].value
                    }
                    let post = JSON.stringify(postObj)
                    const url = "https://int-api.lynq.app/actions/onboarding/newsletter"
                    let xhr = new XMLHttpRequest()
                    xhr.open('POST', url, true);
                    xhr.setRequestHeader('Content-type', 'application/json');
                    // xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

                    xhr.send(post);
                    
                    xhr.onload = function () {
                        if(xhr.status === 200) {
                            email_section[0].classList.add("display-none");
                            submit_succeed[0].classList.remove("display-none");
                            console.log("Post successfully created!")
                        }
                    }
                }
                else {
                    error_span[0].classList.remove("display-none");
                }
            }
        }
    </script>
</HTML>